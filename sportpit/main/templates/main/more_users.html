{% extends 'main/layout.html'%}

{% block titleblock %}Страница сотрудников{% endblock %}

{% block work %}
<!-- Модальное окно -->
<div class="myModal" style="display: none;">
    <div class="modal-content"></div>
    <span class="close">&times;</span>
</div>


<section class="home">
    <div class="upper_text">
        <b3>Страница сотрудников</b3>
        <b3>OneCRM</b3>
    </div>
    <div class="card_menu">

        <div class="table-container-work">
            <div class="upper_table_user">
                <button class="btn">Добавить</button>
                <div class="search_table">
                    <input placeholder="Найти сотрудника" class="input" name="firstName" type="text">
                </div>
                <span class="current-page">
                            Страница {{ users.number }} из {{ users.paginator.num_pages }}
                    Показано с {{ users.start_index }} по {{ users.end_index }} из {{ page.paginator.count }} элементов
                </span>
                <div>
                    {% if users.has_previous %}
                    <form method="get">
                        <!--                        <button type="submit" name="page" value="1">&laquo; первая</button>-->
                        <button type="submit" name="page" value="{{ users.previous_page_number }}">предыдущая</button>
                    </form>
                    {% endif %}
                    {% if users.has_next %}
                    <form method="get">
                        <button type="submit" name="page" value="{{ users.next_page_number }}">следующая</button>
                        <!--                        <button type="submit" name="page" value="{{ users.paginator.num_pages }}">последняя &raquo;-->
                        <!--                        </button>-->
                    </form>
                    {% endif %}
                </div>
                <div class="page-numbers">
                    <a href="?page=1" class="{% if users.number == 1 %}current{% endif %}">1</a>
                    {% if users.number > 4 %}
                        <span class="ellipsis">...</span>
                    {% endif %}
                    {% for num in page_range %}
                        {% if num != 1 and num != users.paginator.num_pages %}
                            <a href="?page={{ num }}" class="{% if num == users.number %}current{% endif %}">{{ num }}</a>
                        {% endif %}
                    {% endfor %}
                    {% if users.number < users.paginator.num_pages|add:"-3" %}
                        <span class="ellipsis">...</span>
                    {% endif %}
                    <a href="?page={{ users.paginator.num_pages }}" class="{% if users.number == users.paginator.num_pages %}current{% endif %}">{{users.paginator.num_pages}}</a>
                </div>

            </div>
            <div class="table-scroll-work">
                <table id="client-table">
                    <thead>
                    <tr>
                        <th>Имя</th>
                        <th>Фамилия</th>
                        <th>Email</th>
                        <th>Телефон</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for user in users %}
                    <tr class="user-row">
                        <td class="user-cell"><a href="{% url 'user-details' user.id %}">{{ user.first_name }}</a></td>
                        <td class="user-cell"><a href="{% url 'user-details' user.id %}">{{ user.last_name }}</a></td>
                        <td class="user-cell"><a href="{% url 'user-details' user.id %}">{{ user.email }}</a></td>
                        <td class="user-cell"><a href="{% url 'user-details' user.id %}">{{ user.username }}</a></td>
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

    </div>


</section>
<script>
    // Находим все ячейки с классом "user-cell"
    const userCells = document.querySelectorAll('.user-cell');

    // Добавляем обработчик события click для каждой ячейки
    userCells.forEach(cell => {
        cell.addEventListener('click', () => {
            // Находим ссылку внутри ячейки и переходим по ней
            const link = cell.querySelector('a');
            if (link) {
                window.location.href = link.href;
            }
        });
    });
















</script>

{% endblock %}